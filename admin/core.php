<?php 








function footer() {
    $dy=date("Y");

    echo'                   <p style="background-color:rgba(0, 0, 0, 0.836);">Â© '.$dy.' HCT. All rights reserved | Design by <a href="https://dollarstir.purplesofts.com/" target="blank">Frederick Ennin.</a></p>';

}






function getproducts() 
{
include "db.php";
$yoa = date("Y");

$geto=mysqli_query($conn,"SELECT * FROM products");

while ($rgo=mysqli_fetch_array($geto)) 
{
   $id= $rgo['id'];
   
   $name=$rgo['name'];
   $image=$rgo['image'];
  
$price=$rgo['price'];

  echo' <tr>
                                                <td>'.$id.'</td>
                                                <td>'.$name.'</td>
                                                <td>'.$price.'</td>
                                               
                                              
                                                
                                               
                                              
                                                


                                                <td><img src="'.$image.'" width="100px" height="100px"></td>
                                                
                                                
                                                <!-- <td>
                                                     <div class="d-flex">
                                                        <div class="usr-img-frame mr-2 rounded-circle">
                                                         
                                                        </div>
                                                    </div> 

                                                    dfhdghdfjh
                                                </td> -->
                                                <td>
                                                <br>
                                                <a href="editpro.php?oid='.$id.'" class="btn btn-secondary mb-4 mr-2">Edit</a><br><br>
                                                    
                                                <a href="dela.php?oid='.$id.'" class="btn btn-danger mb-4 mr-2">Delete</a>
                                                
                                                
                                               
                                                                                             </td>
                                            </tr>';
}

}












function login($email,$password) 

{

    include "db.php";

    $log=mysqli_query($conn,"SELECT * FROM myadmin WHERE email='$email' AND password='$password'");

    if ($row=mysqli_fetch_array($log)) {
     $_SESSION['id']=$row['id'];
     $_SESSION['name']=$row['name'];
     $_SESSION['email']=$row['email'];

     echo '<script>window.location= "vap.php"</script>';
    } else {
        echo    "please enter correct details";
    }
}











function adproduct($name,$price)
{

    include 'db.php';

    $fileinfo = PATHINFO($_FILES['image']['name']);
    $newfilename = $fileinfo['filename'].'-'.time().'.'.$fileinfo['extension'];
    move_uploaded_file($_FILES['image']['tmp_name'],'upload/'.$newfilename);
    $pic = 'upload/'.$newfilename;

    $inspro = mysqli_query($conn,"INSERT INTO products (name,image,price) VALUES ('$name','$pic','$price')");
    if ($inspro) {

        echo' <div id="mess"><p>Product added successfully</p></div>';
    }
    else{

    

        echo' <div id="mess" style="background-color:red;"><p>Faild to Add product</p></div>';

        # code...
    }
}





















function  editproduct($id,$name,$oldpic,$price){

    include 'db.php';


    if (empty($_FILES['image']['name']))
    {

        $edip= mysqli_query($conn,"UPDATE products SET name ='$name',image='$oldpic',price= '$price' WHERE id = '$id' ");

        if ($edip) {

        echo' <div id="mess"><p>product updated successfully</p></div>';
        # code...
        } else {
            echo' <div id="mess" style="background-color:red;"><p>Failed to update product</p></div>';

        }
    }

    else {
        
        $fileinfo1 = PATHINFO($_FILES['image']['name']);
        $newfilename1 = $fileinfo1['filename'].'-'.time().'.'.$fileinfo1['extension'];
        move_uploaded_file($_FILES['image']['tmp_name'],'upload/'.$newfilename1);
        $pic = 'upload/'.$newfilename1;

        $edip= mysqli_query($conn,"UPDATE products SET name ='$name',image='$pic',price= '$price' WHERE id = '$id' ");

        if ($edip) {

        echo' <div id="mess"><p>product updated successfully</p></div>';
        # code...
        } else {
            echo' <div id="mess" style="background-color:red;"><p>Failed to update product</p></div>';

        }


    }



    
    



}



?>












































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































